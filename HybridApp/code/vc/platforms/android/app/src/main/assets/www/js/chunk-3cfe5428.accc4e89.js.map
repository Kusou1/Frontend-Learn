{"version":3,"sources":["webpack:///./src/views/scan/index.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./src/views/scan/index.vue?a9c9","webpack:///./src/views/scan/index.vue?e9ed","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js"],"names":["class","id","title","left-text","right-text","left-arrow","type","plain","size","round","color","toggleLight","lightOn","toggleCamera","frontCamera","_typeof","obj","Symbol","iterator","constructor","prototype","name","setup","state","alert","QRScanner","enableLight","err","status","console","log","disableLight","useFrontCamera","useBackCamera","doScan","onDone","_message","authorized","displayContents","text","error","scan","show","denied","prepare","document","getElementById","style","backgroundColor","querySelector","hide","JSON","stringify","destroy","render","__scopeId","defineWellKnownSymbol","$","DESCRIPTORS","global","has","isObject","defineProperty","f","copyConstructorProperties","NativeSymbol","undefined","description","EmptyStringDescriptionStore","SymbolWrapper","arguments","length","String","result","this","symbolPrototype","symbolToString","toString","native","regexp","configurable","get","symbol","valueOf","string","call","desc","slice","replace","forced"],"mappings":"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","file":"js/chunk-3cfe5428.accc4e89.js","sourcesContent":["<template>\r\n  <div>\r\n    <van-nav-bar title=\"扫一扫\" left-text=\"返回\" right-text=\"按钮\" left-arrow />\r\n\r\n    <div class=\"scan-container\">\r\n      <div class=\"scan-none-1\"></div>\r\n      <div class=\"scan-box-container\">\r\n        <div class=\"scan-none-2\"></div>\r\n        <div class=\"scan-box\">\r\n          <div class=\"scan-box-area\">\r\n            <div class=\"top-half top-left\"></div>\r\n            <div class=\"top-half top-right\"></div>\r\n            <div class=\"bottom-half bottom-left\"></div>\r\n            <div class=\"bottom-half bottom-right\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"scan-none-2\"></div>\r\n      </div>\r\n      <div class=\"scan-none-1\">\r\n        <van-tag type=\"primary\" plain size=\"large\">放入框内，自动扫描</van-tag>\r\n        <div id=\"scanMenu\">\r\n          <van-button round color=\"#00ddaa\" @click=\"toggleLight()\">\r\n            {{lightOn ? '关闭' : '打开'}}\r\n          </van-button>\r\n          <van-button round color=\"#00ddaa\" @click=\"toggleCamera()\">\r\n            {{frontCamera ? '后摄' : '前摄'}}\r\n          </van-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs, onMounted, onUnmounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  name: \"Scan\",\r\n  setup () {\r\n    const state = reactive({\r\n      lightOn: false,\r\n      frontCamera: false\r\n    })\r\n\r\n    const router = useRouter()\r\n\r\n    // 切换闪光灯\r\n    const toggleLight = () => {\r\n      alert('切换闪光灯')\r\n      if (state.lightOn === false) {\r\n        QRScanner.enableLight((err, status) => {\r\n          err && console.log(err)\r\n          state.lightOn = true;\r\n        })        \r\n      } else {\r\n        QRScanner.disableLight((err, status) => {\r\n          err && console.log(err)\r\n          state.lightOn = false;\r\n        }) \r\n      }\r\n    }\r\n\r\n    // 切换摄像头\r\n    const toggleCamera = () => {\r\n      alert('切换摄像头')\r\n      if (state.frontCamera === false) {\r\n        QRScanner.useFrontCamera((err, status) => {\r\n          err && console.log(err)\r\n          state.frontCamera = true\r\n        })\r\n      } else {\r\n        QRScanner.useBackCamera((err, status) => {\r\n          err && console.log(err)\r\n          state.frontCamera = false\r\n        })\r\n      }\r\n    }\r\n\r\n    const doScan = () => {\r\n      if (typeof QRScanner !== 'object') {\r\n        alert('QRScanner 不存在')\r\n        return;\r\n      }\r\n\r\n      QRScanner.prepare(onDone)\r\n      function onDone(err, status) {\r\n        if (err) {\r\n          console.log(err._message)\r\n        }\r\n\r\n        if (status.authorized) {\r\n          QRScanner.scan(displayContents)\r\n          function displayContents(err, text) {\r\n            if (err) {\r\n              console.error(err)\r\n            } else {\r\n              alert(text)\r\n              // 后续操作\r\n            }\r\n          }\r\n\r\n          // 让 webview 透明，执行扫码操作\r\n          QRScanner.show()\r\n        } else if (status.denied) {\r\n          alert('用户拒绝扫码')\r\n        } else {\r\n          alert('未获取数据')\r\n        }\r\n      }\r\n    }\r\n\r\n    // 挂载完成\r\n    onMounted (() => {\r\n      doScan()\r\n    })\r\n\r\n    onUnmounted(() => {\r\n      document.getElementById('app').style.backgroundColor = \"#FFFFFF\"\r\n      document.querySelector('body').style.backgroundColor = \"#FFFFFF\"\r\n      \r\n      try {\r\n        QRScanner.hide(status => {\r\n          console.log('关闭扫描' + JSON.stringify(status))\r\n        })\r\n        QRScanner.destroy(status => {\r\n          console.log('销毁扫描' + JSON.stringify(status))\r\n        })\r\n      } catch (error) {\r\n        console.log(error)\r\n      }\r\n    })\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      toggleLight,\r\n      toggleCamera\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#scanMenu {\r\n  position: absolute;\r\n  bottom: 60px;\r\n  width: 100vw;\r\n}\r\n\r\n@primary: rgb(74, 243, 220);\r\n@bg: rgba(0, 0, 56, 0.4);\r\n\r\n.scan-container {\r\n  background: rgba(0, 0, 0, 0);\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: calc(100vh - 50px);\r\n\r\n  .scan-none-1 {\r\n    flex: 1;\r\n    width: 100%;\r\n    background: @bg;\r\n    text-align: center;\r\n    padding-top: 0.32rem;\r\n    color: rgba(255, 255, 255, 0.8);\r\n\r\n    &:first-child {\r\n      flex: 0.6;\r\n    }\r\n  }\r\n\r\n  .scan-box-container {\r\n    display: flex;\r\n\r\n    .scan-none-2 {\r\n      flex: 1;\r\n      height: calc(8rem + 2px);\r\n      background: @bg;\r\n    }\r\n\r\n    .scan-box {\r\n      width: 8rem;\r\n      height: 8rem;\r\n      border: 1px solid @primary;\r\n      background: rgba(0, 0, 0, 0);\r\n\r\n      .scan-box-area {\r\n        width: 8rem;\r\n        height: 8rem;\r\n        position: relative;\r\n\r\n        .top-half {\r\n          position: absolute;\r\n          top: -3px;\r\n          width: 1rem;\r\n          height: 1rem;\r\n          border-top: 6px solid @primary;\r\n        }.top-left {\r\n          left: -3px;\r\n          border-left: 6px solid @primary;\r\n        }.top-right {\r\n          right: -3px;\r\n          border-right: 6px solid @primary;\r\n        }\r\n\r\n        .bottom-half {\r\n          position: absolute;\r\n          bottom: -3px;\r\n          width: 1rem;\r\n          height: 1rem;\r\n          border-bottom: 6px solid @primary;\r\n        }.bottom-left {\r\n          left: -3px;\r\n          border-left: 6px solid @primary;\r\n        }\r\n        .bottom-right {\r\n          right: -3px;\r\n          border-right: 6px solid @primary;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import { render } from \"./index.vue?vue&type=template&id=c0758546&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=c0758546&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c0758546\"\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=c0758546&lang=less&scoped=true\"","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n"],"sourceRoot":""}